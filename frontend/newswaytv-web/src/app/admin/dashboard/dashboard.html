<section class="dashboard">
  <div class="header">
    <p class="eyebrow">Admin</p>
    <h1>Upload Epaper</h1>
    <p class="subtext">Add a PDF for a specific date and zone.</p>
  </div>

  <form class="form" (ngSubmit)="submit()">
    <div class="grid">
      <label>
        Title
        <input type="text" [(ngModel)]="form.title" name="title" required />
      </label>
      <label>
        Date
        <input type="date" [(ngModel)]="form.date" name="date" required />
      </label>
      <label>
        Zone / Edition
        <select [(ngModel)]="form.editionId" name="editionId" required (ngModelChange)="onEditionChange($event)">
          <option value="">All editions</option>
          <option *ngFor="let edition of editions" [value]="edition.id">
            {{ edition.name }}
          </option>
        </select>
      </label>
      <label>
        Upload PDF
        <input type="file" accept="application/pdf" (change)="onFileSelected($event)" />
      </label>
      <label>
        PDF URL
        <input type="url" [(ngModel)]="form.pdfUrl" name="pdfUrl" required />
      </label>
      <label>
        Thumbnail URL
        <input type="url" [(ngModel)]="form.thumbnailUrl" name="thumbnailUrl" />
      </label>
    </div>

    <div class="actions">
      <button type="submit" [disabled]="isSaving || isUploading || !form.pdfUrl">
        {{ isSaving ? 'Saving...' : (isUploading ? 'Uploading...' : 'Save Epaper') }}
      </button>
      <span class="status" *ngIf="uploadProgress">{{ uploadProgress }}</span>
      <span class="error" *ngIf="errorMessage">{{ errorMessage }}</span>
      <span class="success" *ngIf="successMessage">{{ successMessage }}</span>
    </div>
  </form>

  <section class="list">
    <h2>Uploaded Epapers</h2>
    <div class="list-empty" *ngIf="epapers.length === 0">
      No epapers uploaded yet.
    </div>
    <div class="list-grid">
      <article class="list-card" *ngFor="let epaper of epapers">
        <div class="list-info">
          <h3>{{ epaper.title }}</h3>
          <p>{{ epaper.date }} Â· {{ epaper.editionId }}</p>
        </div>
        <div class="list-actions">
          <a [href]="epaper.pdfUrl" target="_blank" rel="noopener">View PDF</a>
          <a [routerLink]="['/epaper/view', epaper.id]">Open Viewer</a>
        </div>
      </article>
    </div>
  </section>
</section>
